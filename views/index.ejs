<!DOCTYPE html>  
<html lang="en">  
  <head>
    <meta charset="utf-8">
    <title>Poloniex-trader configuration</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="/assets/stylesheets/frontend.css">
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Poloniex-trader</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="starter-template">
        <h1>Poloniex-trader - <%- config.market %></h1>
        <!--<p class="lead">Use this web interface to quickly configure the program.<br> No need to use the terminal anymore, everything in one interface.</p>-->
      </div>

      <% if (error) { %>
      <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
        <%- error %>
      </div>
      <% } %>

      <div class="row">
        <ul class="market-ticker">
          <li><b>Last price</b> <%- trades.lastPrice() %></li>
          <li><b>Bid</b><%- backend.bid() %></li>
          <li><b>Ask</b><%- backend.ask() %></li>
          <li><b>Spread</b><%- backend.spread().toFixed(8) %></li>
        </ul>
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <div class = "panel panel-default">
            <div class = "panel-heading">
              <h2 class= "panel-title">Time period</h2>
            </div>
            <div class = "panel-body">

              <form method="get">
                <fieldset class="form-group">
                  <label for="time">Enter time frame</label>
                  <input type="text" class="form-control" name="time" id="time" placeholder="2h15m30s-1h15m" value="<%- config.time %>">
                </fieldset>
                <p><small>h: hour, m: minute, s: second. eg: 1h15m20s. Can enter range (from 2h ago to 1h ago: 2h-1h).</small></p>
                <ul class="market-ticker">
                  <li><b>Average</b> <%- trades.average(config.begin, config.end).toFixed(8) %></li>
                  <li><b>Volume</b><%- trades.volume(config.begin, config.end).toFixed(3) %></li>
                  <li><b>Low</b><%- trades.low(config.begin, config.end) %></li>
                  <li><b>High</b><%- trades.high(config.begin, config.end) %></li>
                </ul>
                <input type="submit" class="btn btn-primary pull-right" value="Submit">
              </form>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class = "panel panel-default">
            <div class = "panel-heading">
              <h2 class= "panel-title">Balances and active trades</h2>
            </div>
            <div class = "panel-body">
              <ul class="list-group">
                <% for (var key in config.balances) { %>
                <li class="list-group-item"><b><%- key %></b> <%- config.balances[key].available + " (on orders: " + config.balances[key].onOrders + ")" %></li>
                <% } %>
                <% for (var i = 0; i < config.openOrders.length; i = i + 1) { %>
                <li class="list-group-item"><b><%- config.openOrders[i].type %></b> at <%- config.openOrders[i].rate + ", qty: " + config.openOrders[i].amount 
                + " (total: " + config.openOrders[i].amount + ")" %></li>
                <% } %>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class = "panel panel-default">
            <div class = "panel-heading">
              <h2 class= "panel-title">Config</h2>
            </div>
            <div class = "panel-body">

              <form method="post">
                <fieldset class="form-group">
                  <label for="market">Enter market</label>
                  <select class="form-control" name="market" id="market">
                  <% for(var i=0; i < config.markets.length; i++) { %>
                     <option <% if (config.markets[i] == config.market){ %>selected<% } %>><%- config.markets[i] %></option>
                  <% } %>
                  </select>
                </fieldset>

                <fieldset class="form-group">
                  <label for="apikey">Enter API key</label>
                  <input type="text" class="form-control" name="apikey" id="apikey" placeholder="API key" value="<%- config.api.key %>">
                </fieldset>

                <fieldset class="form-group">
                  <label for="apikey">Enter API secret</label>
                  <input type="text" class="form-control" name="apisecret" id="apisecret" placeholder="API secret" value="<%- config.api.secret %>">
                </fieldset>

                <input type="hidden" name="action" value="glconf">
                <input type="submit" class="btn btn-primary pull-right" value="Submit">
              </form>
            </div>
          </div>
        </div>
      </div>

    </div><!-- /.container -->
    <!-- <%- config.begin %> <%- config.end %> -->

    <script src="/assets/javascript/jquery.min.js"></script>
    <script src="/assets/javascript/frontend.js"></script>
    <script src="/assets/javascript/backend.js"></script>
  </body>
</html>  